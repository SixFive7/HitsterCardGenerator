# Phase 24: Fix Card Flip - Execution Plan

## Bug Root Cause

The flip button in `CardControls.svelte` uses `onclick={onFlip}` which passes the `MouseEvent` as the first argument to the handler. In `App.svelte`, `handleFlipCard(index?: number)` checks `index !== undefined` to decide whether to use the passed index or the current card index. Since the MouseEvent is truthy and not undefined, it tries to use the event object as a card index, which fails silently.

## Fix Strategy

Change the onclick handler to explicitly call `onFlip()` without arguments, preventing the MouseEvent from being passed as the index parameter.

---

## Tasks

### Task 1: Fix flip button onclick handler in CardControls.svelte
**File:** `web/src/lib/CardPreview/CardControls.svelte`

**Change:** Line 46
- **From:** `onclick={onFlip}`
- **To:** `onclick={() => onFlip()}`

**Rationale:** This ensures `onFlip()` is called with no arguments, so `handleFlipCard` in App.svelte correctly falls back to using `customizationState.currentCardIndex`.

### Task 2: Visual verification
**Action:** Use Chrome DevTools MCP to verify the fix works

1. Navigate to the app at localhost:5173
2. Upload a test CSV or build a playlist with multiple tracks
3. Proceed to the Preview step
4. Click the flip button and verify the card flips
5. Navigate to different cards and verify flip works on each

---

## Verification Criteria

- [ ] Flip button click triggers card flip animation
- [ ] Flip works on any card in the carousel (not just the first)
- [ ] Existing click-on-card-to-flip behavior still works
- [ ] Hover animation on flip button unchanged
