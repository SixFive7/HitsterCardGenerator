# Milestone v2.3: Containerization

**Status:** âœ… SHIPPED 2025-12-24
**Phases:** 13-16
**Total Plans:** 5

## Overview

Docker containerization with automated CI/CD pipeline for easy deployment via docker-compose.

## Phases

### Phase 13: Dev Experience

**Goal**: Enable HMR during development, configure VS Code launch/tasks for optimal debugging workflow
**Depends on**: Phase 12 (devcontainer provides dev environment)
**Plans**: 1 plan

Plans:
- [x] 13-01: VS Code dev workflow (MSBuild condition + tasks + compound launch)

**Details:**
- Debug builds skip npm (fast iteration ~7s vs ~15s+)
- Release builds include full npm install and build
- Compound "Full Stack (F5)" launch starts both .NET API and Vite dev server
- Vite HMR available at localhost:5173 during development

### Phase 14: Docker Image

**Goal**: Multi-stage Dockerfile with environment variable configuration for Spotify credentials
**Depends on**: Phase 13 (dev experience ensures clean build separation)
**Plans**: 1 plan

Plans:
- [x] 14-01: Multi-stage Dockerfile with non-root user and health check

**Details:**
- Created .dockerignore excluding build artifacts, node_modules, IDE files
- Multi-stage Dockerfile with layer caching optimization
- Non-root execution on port 8080
- wget health check for container orchestration
- Runtime env vars for Spotify secrets (not baked into image)

### Phase 15: GitHub Actions CI

**Goal**: Automated build and push to GitHub Container Registry on release tags
**Depends on**: Phase 14
**Plans**: 1 plan

Plans:
- [x] 15-01: Release workflow with GHCR push + CHANGELOG-based release notes

**Details:**
- Release workflow triggered on semantic version tags (v*.*.*)
- Verify job runs dotnet restore, build, and format check before publish
- Release job builds Docker image, pushes to GHCR, creates GitHub Release
- CHANGELOG.md with full version history for automated release notes

### Phase 16: Multi-Architecture & User Docs

**Goal**: Buildx for AMD64 + ARM64 builds, project meta files
**Depends on**: Phase 15
**Plans**: 2 plans

Plans:
- [x] 16-01: QEMU + platforms config, MIT LICENSE, CLAUDE.md
- [x] 16-02: Comprehensive README with screenshots and docker-compose examples

**Details:**
- QEMU emulation for ARM64 cross-compilation in GitHub Actions
- Multi-arch builds: linux/amd64 and linux/arm64
- MIT LICENSE for open-source distribution
- CLAUDE.md project guide for Claude Code
- Comprehensive README with Quick Start, Deployment patterns, workflow screenshots

---

## Milestone Summary

**Key Decisions:**
- Release-only NpmBuild: Debug builds fast, Release includes frontend
- No serverReadyAction: Developer opens Vite port 5173 for HMR
- Compound launch first: Default F5 starts full stack environment
- wget over curl in HEALTHCHECK: aspnet image is minimal, wget more available
- Port 8080 (non-root): Ports below 1024 require root privileges
- Runtime env vars for secrets: SPOTIFY_CLIENT_ID/SECRET passed at docker run

**Issues Resolved:**
- Docker CLI not available in devcontainer (verified via dotnet publish)
- CLAUDE.md didn't exist (created comprehensive file from scratch)

**Issues Deferred:**
None

**Technical Debt Incurred:**
None

---

_For current project status, see .planning/ROADMAP.md_
