# Milestone v2.1: Enhancements

**Status:** ✅ SHIPPED 2025-12-22
**Phases:** 10-11
**Total Plans:** 2

## Overview

Simplify startup by having .NET serve the Svelte frontend directly - single process instead of running backend and frontend separately.

## Phases

### Phase 10: Static File Serving

**Goal**: Configure .NET Minimal API to serve Svelte build output from wwwroot
**Depends on**: Phase 9
**Plans**: 1 plan

Plans:
- [x] 10-01: Static file middleware + copy build output

**Details:**
- Added UseDefaultFiles() and UseStaticFiles() middleware for serving wwwroot
- Added MapFallbackToFile("index.html") for SPA client-side routing
- Copied Svelte build output (index.html + assets/) to wwwroot
- Verified single-origin serving: API at /api/*, frontend at /

### Phase 11: Build Integration

**Goal**: Integrate Svelte build into .NET project workflow - single `dotnet run` starts everything
**Depends on**: Phase 10
**Plans**: 1 plan

Plans:
- [x] 11-01: MSBuild targets for npm install/build + Vite output to wwwroot

**Details:**
- Vite configured to output directly to wwwroot (no copy step needed)
- MSBuild NpmInstall target runs npm install when node_modules missing
- MSBuild NpmBuild target runs npm build before .NET compilation
- Cross-platform support with Windows npm.cmd detection
- Single `dotnet run` now builds and serves complete application

---

## Milestone Summary

**Key Decisions:**
- Middleware order: UseDefaultFiles → UseStaticFiles → routes → MapFallbackToFile (standard .NET pattern)
- Vite direct output to wwwroot: Eliminates copy step, cleaner workflow
- Simplified NpmInstall condition: MSBuild datetime comparison unreliable, use Exists() check

**Issues Resolved:**
- Eliminated need to run two processes (backend + frontend dev server)
- No manual npm build step required before running .NET app

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
